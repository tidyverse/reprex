<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="reprex">
<title>reprex venue RTF • reprex</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.8/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="reprex venue RTF">
<meta property="og:description" content="reprex">
<meta property="og:image" content="https://reprex.tidyverse.org/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="reprex.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">reprex</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/reprex-dos-and-donts.html">Reprex do's and don'ts</a>
    <a class="dropdown-item" href="../articles/rtf.html">reprex venue RTF</a>
    <a class="dropdown-item" href="../articles/datapasta-reprex.html">Using datapasta with reprex</a>
    <a class="dropdown-item" href="../articles/suppress-startup-messages.html">Suppress package startup messages</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/04/reprex-2-0-0/">reprex 2.0.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/02/reprex-1-0-0/">reprex 1.0.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidyverse/reprex/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>reprex venue RTF</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/reprex/blob/HEAD/vignettes/articles/rtf.Rmd" class="external-link"><code>vignettes/articles/rtf.Rmd</code></a></small>
      <div class="d-none name"><code>rtf.Rmd</code></div>
    </div>

    
    
<p>Use <code><a href="../reference/reprex_venue.html">reprex_rtf()</a></code> to get output in <a href="https://en.wikipedia.org/wiki/Rich_Text_Format" class="external-link">Rich Text
Format</a>. It is a convenience wrapper around
<code>reprex(venue = "rtf")</code>. This is useful for creating syntax
highlighted code snippets – rendered or not – to paste into software
such as Keynote, PowerPoint, or Word.</p>
<p>Why is RTF special? Although Pandoc can produce RTF and, therefore,
so can <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render()</a></code> and
<code><a href="../reference/reprex.html">reprex::reprex()</a></code>, Pandoc’s syntax highlighting is
unavailable for RTF output. For now, we’ve got to get the functionality
from somewhere else. Syntax highlighting is a non-issue for
<code>venue = "gh"</code> (GitHub) and <code>venue = "so"</code> (Stack
Overflow), because the target sites take care of that when the Markdown
content is displayed.</p>
<p>
</p>
<div style="height: auto">
<p><img src="https://raw.githubusercontent.com/tidyverse/reprex/main/img/reprex_rtf_jennybryan.gif" alt="Gif of setting options to control highlight and using reprex with the RTF venue" style="width: 100%;max-height: 100%"></p>
</div>

<p>The “rtf” venue was introduced in reprex v0.2.1 and is experimental.
The <a href="http://www.andre-simon.de/doku/highlight/en/highlight.php" class="external-link">highlight</a>
command line tool must (1) be installed and (2) be on your
<code>PATH</code>. People have successfully used
<code><a href="../reference/reprex_venue.html">reprex_rtf()</a></code> on macOS and Windows (specifically, Windows 10
+ Windows PowerShell 5.1). We consider it experimental because of the
rather hacky way we shell out to highlight and, long-term, it would be
preferable to get syntax-highlighted RTF through a proper R package. The
existing <a href="https://cran.r-project.org/package=highlight" class="external-link">highlight R
package</a> can’t do this (yet?).</p>
<div class="section level3">
<h3 id="how-to-install-highlight">How to install highlight<a class="anchor" aria-label="anchor" href="#how-to-install-highlight"></a>
</h3>
<p>The highlight website offers downloads in various forms, for various
OSes:</p>
<ul>
<li><a href="http://www.andre-simon.de/zip/download.php" class="external-link uri">http://www.andre-simon.de/zip/download.php</a></li>
</ul>
<p>For macOS users who use <a href="https://brew.sh" class="external-link">homebrew</a>, this
works:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install highlight</span></code></pre></div>
<p>For Windows users who use <a href="https://chocolatey.org/" class="external-link">chocolatey</a>, this works:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">choco</span> install highlight</span></code></pre></div>
<p>On Windows, the chocolatey method did not add highlight to my
<code>PATH</code> and this could affect other methods of installation as
well. In this case, you’ll <a href="https://www.maketecheasier.com/what-is-the-windows-path/" class="external-link">need to
do this manually</a>. In my case, I needed to add
<code>C:\Program Files\Highlight</code> to <code>PATH</code>. A second
issue we’ve seen is with the scoop package manager for Windows, which
uses a shim-based method of making the executables it installs findable.
The shim method appears to be less resilient to the different ways of
calling highlight from R.</p>
<p><code><a href="../reference/reprex_venue.html">reprex_rtf()</a></code> should work when
<code>Sys.which("highlight")</code>, executed in R, correctly returns
the path to your highlight executable.</p>
<p>Here’s how that looks for me on macOS:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></span><span class="op">(</span><span class="st">"highlight"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  highlight </span></span>
<span><span class="co">#&gt; "/usr/local/bin/highlight" </span></span></code></pre></div>
<p>and on Windows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></span><span class="op">(</span><span class="st">"highlight"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                              highlight </span></span>
<span><span class="co">#&gt; "C:\\PROGRA~1\\HIGHLI~1\\HIGHLI~2.EXE" </span></span></code></pre></div>
<p>Here is the highlight call implied by the default behaviour of
<code><a href="../reference/reprex_venue.html">reprex_rtf()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">highlight</span> <span class="at">-i</span> foo_reprex.R <span class="at">--out-format</span> rtf <span class="at">--no-trailing-nl</span> <span class="at">--encoding</span><span class="op">=</span>UTF-8 <span class="at">--style</span> darkbone <span class="at">--font</span> <span class="st">'Courier Regular'</span> <span class="at">--font-size</span> 50 <span class="at">-o</span> foo_reprex.rtf</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>Let’s reprex some code and stick it on a Keynote slide with other
non-R “features”.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/reprex.html">reprex</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span>, venue <span class="op">=</span> <span class="st">"rtf"</span><span class="op">)</span></span></code></pre></div>
<p><img src="img/keynote-w00t.png" width="75%"></p>
</div>
<div class="section level2">
<h2 id="highlight-options">highlight options<a class="anchor" aria-label="anchor" href="#highlight-options"></a>
</h2>
<p>If you don’t like the defaults, control highlight command line
arguments by setting <code>reprex.highlight.*</code> options. Why
options? I didn’t want to burden <code><a href="../reference/reprex.html">reprex()</a></code> with even more
arguments and this is usually something you want to set globally for
yourself or for an entire project or talk or course.</p>
<p>Set these options with code like this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  reprex.highlight.hl_style  <span class="op">=</span> <span class="st">"darkbone"</span>,</span>
<span>  reprex.highlight.font      <span class="op">=</span> <span class="st">"Source Code Pro"</span>,</span>
<span>  reprex.highlight.font_size <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The supported options are <code>reprex.highlight.hl_style</code>,
<code>reprex.highlight.font</code>,
<code>reprex.highlight.font_size</code> (all shown above), and
<code>reprex.highlight.other</code> (a catchall for anything else, shown
below).</p>
<p>You could set options for all your reprexing by doing this in your
user-level <code>.Rprofile</code>. Create or open this file via
<code>usethis::edit_r_profile()</code>.</p>
<p>You could also set options for a specific Project in
<code>.Rprofile</code> inside the Project. Create or open this file via
<code>usethis::edit_r_profile("project")</code>.</p>
<p>Finally, you might collect all of the R snippets destined for
inclusion in, e.g. some talk slides, in a <code>.R</code> file. It would
make sense to set the <code>reprex.highlight.*</code> options at the
start of that file.</p>
<p><code>hl_style</code> must be one of your existing highlight themes
and <code>font</code> must be one of your installed fonts.</p>
<p>List available themes:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">highlight</span> <span class="at">--list-scripts</span><span class="op">=</span>themes</span></code></pre></div>
<p>But what do these themes <em>look like</em>? Here are some galleries
that probably have high overlap with your themes:</p>
<p><a href="http://www.andre-simon.de/doku/highlight/en/theme-samples.php" class="external-link uri">http://www.andre-simon.de/doku/highlight/en/theme-samples.php</a><br><a href="https://rclickhandbuch.files.wordpress.com/2014/09/knitrthemesoverview.pdf" class="external-link uri">https://rclickhandbuch.files.wordpress.com/2014/09/knitrthemesoverview.pdf</a></p>
<p>You can also override defaults on-the-fly. Here’s how to do that for
a single call using withr and, as a bonus, how to use
<code>reprex.highlight.other</code> to send arbitrary command line
arguments to highlight:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_options.html" class="external-link">with_options</a></span><span class="op">(</span></span>
<span>  new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    reprex.highlight.hl_style  <span class="op">=</span> <span class="st">"dusk"</span>,</span>
<span>    reprex.highlight.font      <span class="op">=</span> <span class="st">"Fira Code Regular"</span>,</span>
<span>    reprex.highlight.font_size <span class="op">=</span> <span class="fl">35</span>,</span>
<span>    reprex.highlight.other     <span class="op">=</span> <span class="st">"--line-numbers --line-number-length=2 --zeroes"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu">reprex</span><span class="fu">::</span><span class="fu"><a href="../reference/reprex.html">reprex</a></span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"(x &lt;- rnorm(3))"</span>, <span class="st">"mean(x)"</span><span class="op">)</span>, venue <span class="op">=</span> <span class="st">"rtf"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="img/dusk-fira-35-line-numbers.png" width="60%"></p>
<p>Here’s how to set highlight options for part of an R session:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">op</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  reprex.highlight.hl_style  <span class="op">=</span> <span class="st">"anotherdark"</span>,</span>
<span>  reprex.highlight.font      <span class="op">=</span> <span class="st">"Andale Mono Regular"</span>,</span>
<span>  reprex.highlight.font_size <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  reprex.highlight.other     <span class="op">=</span> <span class="st">"--line-numbers"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">reprex</span><span class="fu">::</span><span class="fu"><a href="../reference/reprex.html">reprex</a></span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"(x &lt;- rnorm(3))"</span>, <span class="st">"mean(x)"</span><span class="op">)</span>, venue <span class="op">=</span> <span class="st">"rtf"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="va">op</span><span class="op">)</span></span></code></pre></div>
<p><img src="img/anotherdark-andale-60-line-numbers.png" width="85%"></p>
<p>Experience has shown that it is hard to predict which aspects of the
RTF will be honored when you paste into the target document. We’re
talking about things like the font size or background color. This seems
to vary greatly across applications and operating systems and you’ll
just have to experiment to find a workflow that is practical for
you.</p>
<p>Note that it is even possible to create a custom highlight theme,
e.g. to match the theme of a Keynote or Powerpoint slide deck with
respect to background color, font, etc. A specific example of this is
documented in these <a href="https://github.com/jennybc/debugging/blob/master/how-to/highlight-custom-theme.md" class="external-link">how-to
notes</a>.</p>
</div>
<div class="section level2">
<h2 id="run-or-not">Run … or not<a class="anchor" aria-label="anchor" href="#run-or-not"></a>
</h2>
<p>If you just want to highlight code, but not run it, set chunk option
<code>eval = FALSE</code> option, i.e. put a special comment as the
first line of your reprex source:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#+ eval = FALSE</span></span>
<span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>The above source, when <code><a href="../reference/reprex.html">reprex()</a></code>ed, will not include the
usual output. This is not specific to <code>venue = "rtf"</code>, but
it’s more likely to come up in this setting.</p>
<p><img src="img/eval-false.png" width="20%"></p>
</div>
<div class="section level2">
<h2 id="what-if-each-snippet-cant-be-self-contained">What if each snippet can’t be self-contained?<a class="anchor" aria-label="anchor" href="#what-if-each-snippet-cant-be-self-contained"></a>
</h2>
<div class="section level3">
<h3 id="reprexprex-and-friends">
<code>reprex:::prex()</code> and friends<a class="anchor" aria-label="anchor" href="#reprexprex-and-friends"></a>
</h3>
<p>When preparing bits of code for a presentation, it can be impractical
to make each snippet completely self-contained. You really need to run
the snippets in the current workspace and session. But
<code><a href="../reference/reprex.html">reprex()</a></code> does not allow this.</p>
<p>The <strong>unexported</strong> function <code>prex()</code>
addresses this use case. It’s like <code><a href="../reference/reprex.html">reprex()</a></code>, but much less
reproducible!</p>
<ul>
<li>Code is evaluated in the global environment of the current R
session.</li>
<li>Current working directory is used.</li>
<li>
<code>advertise = FALSE</code> is the default.</li>
</ul>
<p><code>prex()</code> also has “venue as suffix” variants, so
<code>reprex:::prex_rtf(...)</code> is short for
<code>reprex:::prex(..., venue = "rtf")</code>.</p>
<p>This code defines <code>x</code> and <code>y</code> in the current
workspace and writes the file <code>stuff.txt</code> to the current
working directory.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">"blah blah"</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"stuff.txt"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now we can show the difference between <code>prex()</code> and
<code><a href="../reference/reprex.html">reprex()</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">prex</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"stuff.txt"</span><span class="op">)</span>  </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>yields</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "x" "y"</span></span>
<span><span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span>
<span><span class="co">#&gt; [1] 5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"stuff.txt"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "blah blah"</span></span></code></pre></div>
<p><code>x</code> and <code>y</code> can be found, even though they
aren’t defined in the snippet, and <code>stuff.txt</code> can be
read.</p>
<p>This is very different from executing the same code via
<code><a href="../reference/reprex.html">reprex()</a></code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/reprex.html">reprex</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"stuff.txt"</span><span class="op">)</span>  </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>which yields:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; character(0)</span></span>
<span><span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): object 'x' not found</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"stuff.txt"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in file(con, "r"): cannot open file 'stuff.txt': No such file or</span></span>
<span><span class="co">#&gt; directory</span></span>
<span><span class="co">#&gt; Error in file(con, "r"): cannot open the connection</span></span></code></pre></div>
<p><code>x</code> and <code>y</code> can’t be found, because
<code><a href="../reference/reprex.html">reprex()</a></code> works in a clean session, and
<code>stuff.txt</code> can’t be found, because <code><a href="../reference/reprex.html">reprex()</a></code>
works in a temp directory, by default.</p>
<p>If you’re going to <code>prex()</code> a lot, you’ll want to do
something like this in your <code>.R</code> file of snippets or in the
project-specific or user-level <code>.Rprofile</code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prex</span> <span class="op">&lt;-</span> <span class="fu">reprex</span><span class="fu">:::</span><span class="va">prex</span></span>
<span><span class="va">prex_rtf</span> <span class="op">&lt;-</span> <span class="fu">reprex</span><span class="fu">:::</span><span class="va">prex_rtf</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="selectively-hide-and-reveal-code">Selectively hide and reveal code<a class="anchor" aria-label="anchor" href="#selectively-hide-and-reveal-code"></a>
</h2>
<p><em>Before <code>prex()</code> existed, you had to use a more
cumbersome technique to produce small snippets, by hiding code. We leave
this here in case it is still useful in some situations.</em></p>
<p>You can use knitr chunk options to selectively hide code, i.e. to run
a large snippet, but only include a small bit in the output.</p>
<p>This is easiest to show by example. If you <code><a href="../reference/reprex.html">reprex()</a></code> this
code, only the last three lines and their output will appear in the
output. But the other lines will be run, i.e. <code>str_reverse()</code>
will be defined, as will the <code>bizzaro()</code> generic and default
method.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#+ include = FALSE</span></span>
<span><span class="va">str_reverse</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">""</span><span class="op">)</span>,</span>
<span>    FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">""</span><span class="op">)</span>,</span>
<span>    FUN.VALUE <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#+ include = FALSE</span></span>
<span><span class="va">bizarro</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">UseMethod</a></span><span class="op">(</span><span class="st">"bizarro"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">bizarro.default</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span></span>
<span>    <span class="st">"Don't know how to make bizzaro &lt;"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="st">"&gt;"</span>,</span>
<span>    call. <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#+ include = TRUE</span></span>
<span><span class="va">bizarro.character</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">str_reverse</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bizarro</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"abc"</span>, <span class="st">"def"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bizarro</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p><img src="img/bizarro-selective-reveal.png" width="70%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.jimhester.com/" class="external-link">Jim Hester</a>, David Robinson, <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/cderv" class="external-link">Christophe Dervieux</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
